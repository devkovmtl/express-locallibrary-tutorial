<%- include('head'); -%>

<div class="container-fluid">
  <div class="row">
    <%- include('sidenav'); -%>
    <div class="col-sm-10">
      <h1><%= title %></h1>
      <form action="" method="POST">
        <div class="form-group">
          <label for="title">Title: </label>
          <input
            type="text"
            id="title"
            name="title"
            class="form-control"
            placeholder="Name of book"
            required
            value="<%= book && book.title ? book.title: ''%>"
          />
        </div>

        <div class="form-group">
          <label for="author">Author: </label>
          <select
            name="author"
            id="author"
            class="form-control"
            placeholder="Select author"
            required
          >
            <% for (let i = 0; i < authors.length; i++) { %> <% if (book) { %>
            <option
              value="<%=authors[i]._id%>"
              selected="<%= authors[i]._id.toString() == book.author._id.toString() ? 'selected': false %>"
            >
              <%= authors[i].name %>
            </option>
            <% } else {%>
            <option value="<%=authors[i]._id%>"><%= authors[i].name %></option>
            <% } %> <% } %>
          </select>
        </div>

        <div class="form-group">
          <label for="summary">Summary:</label>
          <textarea
            class="form-control"
            name="summary"
            id="summary"
            placeholder="Summary"
          >
          <%=book && book.summary? book.summary: '' %>
        </textarea
          >
        </div>

        <div class="form-group">
          <label for="isbn">ISBN:</label>
          <input
            type="text"
            id="isbn"
            class="form-control"
            placeholder="ISBN13"
            name="isbn"
            required
            value="<%= book && book.isbn ?  book.isbn: ''%>"
          />
        </div>

        <div class="form-group">
          <label for="genre">Genre: </label>
          <div>
            <%for(let i =0; i < genres.length; i++) {%>
            <div style="display: inline; padding-right: 10px">
              <input
                type="checkbox"
                class="checkbox-input"
                name="genre"
                id="<%=genres[i]._id%>"
                checked="<%=genres[i].checked %>"
              />
              <label for="<%=genres[i]._id %>"><%=genres[i].name%></label>
            </div>
            <% } %>
          </div>
        </div>

        <div class="form-group">
          <button class="btn btn-primary" type="submit">Submit</button>
        </div>
      </form>
      <% if(errors && errors.length > 0) {%>
      <ul>
        <% for (let i=0; i < errors.length; i++) { %>
        <li><%= errors[i].msg %></li>
        <% } %>
      </ul>
      <% } %>
    </div>
  </div>
</div>

<%- include('footer'); -%>

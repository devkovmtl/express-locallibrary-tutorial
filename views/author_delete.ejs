<%- include('head'); -%>

<div class="container-fluid">
  <div class="row">
    <%- include('sidenav'); -%>
    <div class="col-sm-10">
      <h1><%= title %>: <%= author.name %></h1>
      <p><%= author.lifespan %></p>
      <%if (authors_books.length > 0) { %>
      <p>
        <strong
          >Delete the following books before attempting to delete this
          author.</strong
        >
      </p>
      <div style="margin-left: 20px; margin-top: 20px">
        <h4>Books</h4>
        <dl>
          <% for (let i=0; i < authors_books.length; i++) {%>
          <dt>
            <a href="<%=authors_books[i].url%>"><%=authors_books[i].title%></a>
          </dt>
          <%if(authors_books[i] !== undefined && authors_books[i].summary !==
          undefined) {%>
          <dd><%=authors_books[i].summary%></dd>
          <% } %> <% } %>
        </dl>
      </div>
      <% } else { %>
      <p>Do you really want to delete this Author ?</p>
      <form method="POST">
        <div class="form-group">
          <input
            type="hidden"
            id="authorid"
            class="form-control"
            name="authorid"
            required
            value="<%=author._id%>"
          />
        </div>
        <button class="btn btn-primary" type="submit">Delete</button>
      </form>
      <% } %> <% if(errors && errors.length > 0) {%>
      <ul>
        <% for (let i=0; i < errors.length; i++) { %>
        <li><%= errors[i].msg %></li>
        <% } %>
      </ul>
      <% } %>
    </div>
  </div>
</div>

<%- include('footer'); -%>
